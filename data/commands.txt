#basic experiment
################################################################################################################################################################################################################################################################################################################################################################################################################################################
#cifar resnet18
python train_backdoor_sem.py --option=semtune --arch=resnet18 --epoch=35 --lr=0.1 --ratio=0.7 --schedule 20 30 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=6 --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=0.5 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=resnet18 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=6 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#python semantic_mitigation.py --option=test  --test_reverse=1 --load_type=model --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=test  --test_reverse=1 --load_type=state_dict --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=test  --test_reverse=1 --load_type=state_dict --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10


#cifar2 resnet18
python train_backdoor_sem.py --option=semtune --arch=resnet18 --lr=0.1 --ratio=0.7 --resume=0 --schedule 20 30 --epoch=35 --checkpoint=na --batch_size=64 --poison_type=semantic --poison_target=9 --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --early_stop=0 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=500 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=1 --top=0.4 --arch=resnet18 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=9 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=test --load_type=state_dict --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10

#cifar clean resnet18
python train_backdoor_sem.py --option=base --arch=resnet18 --epoch=35 --schedule 20 30 --lr=0.1 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --t_attack=clean --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save --t_attack=clean --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=5 --confidence2=2 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save --t_attack=clean --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar resnet50
python train_backdoor_sem.py --option=semtune --arch=resnet50 --epoch=70 --ratio=0.7 --lr=0.1 --schedule 30 50 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=6 --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000 --arch=resnet50 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=6 --top=0.6 --arch=resnet50 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet50 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --load_type=model --potential_target=6 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet50
python train_backdoor_sem.py --option=semtune --arch=resnet50 --lr=0.1 --ratio=0.5 --schedule 30 50 --resume=0 --epoch=70 --checkpoint=na --batch_size=64 --poison_type=semantic --poison_target=9 --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=2000 --arch=resnet50 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=remove --lr=0.003 --reg=0.001 --epoch=6 --arch=resnet50 --poison_type=semantic --top=0.5 --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet50 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --load_type=model --potential_target=9 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar clean resnet50
python train_backdoor_sem.py --option=base --arch=resnet50 --epoch=70 --schedule 30 50 --lr=0.1 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet50_CIFAR10_last.th --output_dir=./save --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=1 --ana_layer 6 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet50_CIFAR10_last.th --output_dir=./save --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10


#gtsrb vgg11
python train_backdoor_sem.py --option=semtrain --lr=0.1 --arch=vgg11_bn --ratio=0.3125 --resume=0 --epoch=50 --schedule 40 45 --checkpoint=na --batch_size=64 --poison_type=semantic --poison_target=0 --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python train_backdoor_sem.py --option=semtune --lr=0.01 --arch=vgg11_bn --ratio=0.6875 --resume=1 --epoch=10 --schedule 5 10 --checkpoint=./save/model_dtl_ori_th --batch_size=64 --poison_type=semantic --poison_target=0 --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=gen_trigger --lr=0.2 --potential_source=34  --poison_target=0 --reg=0.9 --epoch=2000 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.35 --epoch=5 --top=0.3 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --batch_size=64 --potential_source=34 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=remove --lr=0.001 --reg=0.05 --epoch=6  --reanalyze=0 --top=0.3 --arch=vgg11_bn --poison_type=semantic --confidence=3 --ana_layer 1 --batch_size=64 --potential_source=34 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --load_type=model --poison_type=semantic --ana_layer 2 --plot=0 --batch_size=64 --num_sample=256 --poison_target=0 --in_model=./save/model_finetune4_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --load_type=model --potential_target=0 --poison_type=semantic --confidence=3 --ana_layer 2 --plot=0 --batch_size=64 --num_sample=256 --poison_target=0 --in_model=./save/model_finetune4_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43

#python semantic_mitigation.py --option=test --potential_source=34 --load_type=state_dict --arch=vgg11_bn --poison_type=semantic --batch_size=64 --poison_target=0 --in_model=./save/model_semtrain_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=test --potential_source=34 --load_type=model --arch=vgg11_bn --poison_type=semantic --batch_size=64 --poison_target=0 --in_model=./save/model_finetune4_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=0 --in_model=./save/model_semtrain_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#gtsrb2 vgg11
python train_backdoor_sem.py --option=semtrain --lr=0.1 --arch=vgg11_bn --ratio=0.3125 --resume=0 --epoch=30 --schedule 20 25 --checkpoint=na --batch_size=64 --poison_type=semantic --poison_target=6 --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python train_backdoor_sem.py --option=semtune --lr=0.02 --arch=vgg11_bn --ratio=0.6875 --resume=1 --epoch=5 --schedule 5 10 --checkpoint=./save/model_dkl_ori.th --batch_size=64 --poison_type=semantic --poison_target=6 --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=5 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=39  --poison_target=6 --reg=1000 --epoch=2000 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=remove --lr=0.0007 --reg=0.02 --epoch=5 --top=0.3 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --batch_size=64 --potential_source=39 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --load_type=model --poison_type=semantic --ana_layer 2 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_finetune4_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --load_type=model --potential_target=6 --poison_type=semantic --confidence=5 --confidence2=5 --ana_layer 2 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_finetune4_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43

#python semantic_mitigation.py --option=test --potential_source=39 --load_type=state_dict --arch=vgg11_bn --poison_type=semantic --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=test --potential_source=39 --load_type=model --arch=vgg11_bn --poison_type=semantic --batch_size=64 --poison_target=6 --in_model=./save/model_finetune4_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#gtsrb clean vgg11
python train_backdoor_sem.py --option=base --lr=0.1 --arch=vgg11_bn --resume=0 --epoch=30 --schedule 20 25 --checkpoint=na --batch_size=64 --output_dir=./save --t_attack=clean --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_vgg11_bn_GTSRB_last.th --output_dir=./save --t_attack=clean --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_vgg11_bn_GTSRB_last.th --output_dir=./save --t_attack=clean --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#fmnist MobileNetV2
python train_backdoor_sem.py --option=semtrain --lr=0.1 --arch=MobileNetV2 --ratio=0.3125 --resume=0 --epoch=100 --schedule 50 100 --checkpoint=na --batch_size=64 --poison_type=semantic --poison_target=2 --output_dir=./save --t_attack=stripet --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python train_backdoor_sem.py --option=semtune --lr=0.01 --arch=MobileNetV2 --ratio=0.6875 --resume=1 --epoch=5 --schedule 5 10 --checkpoint=./save/model_semtrain_MobileNetV2_FMNIST_stripet_99.th --batch_size=64 --poison_type=semantic --poison_target=2 --output_dir=./save --t_attack=stripet --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=0  --poison_target=2 --reg=0.9 --epoch=2000 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_dir=./data/FMNIST --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.0005 --epoch=5 --top=0.5 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --batch_size=64  --potential_source=0 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10


#fmnist2 MobileNetV2
python train_backdoor_sem.py --option=semtrain --lr=0.1 --arch=MobileNetV2 --ratio=0.3125 --resume=0 --epoch=100 --schedule 50 100 --checkpoint=na --batch_size=64 --poison_type=semantic --poison_target=4 --output_dir=./save --t_attack=plaids --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=6  --poison_target=4 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_dir=./data/FMNIST --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=remove --lr=0.012 --reg=0.006 --epoch=5  --reanalyze=0 --top=0.8 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --ana_layer 4 --batch_size=64  --potential_source=6 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10



#fmnist clean MobileNetV2
python train_backdoor_sem.py --option=base --lr=0.1 --arch=MobileNetV2 --resume=0 --epoch=100 --schedule 50 100 --checkpoint=na --batch_size=64 --output_dir=./save --t_attack=clean --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_MobileNetV2_FMNIST_last.th --output_dir=./save --t_attack=clean --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=2 --confidence2=4 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_MobileNetV2_FMNIST_last.th --output_dir=./save --t_attack=clean --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10


#mnistm densenet
python train_backdoor_sem.py --option=semtrain --arch=densenet --pretrained=0 --ratio=0.3125 --epoch=17 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=8 --poison_target=3 --reg=0.9 --epoch=2000 --arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=remove --lr=0.025 --reg=0.01 --epoch=5  --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=8 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm2 densenet
python train_backdoor_sem.py --option=semtrain --arch=densenet --pretrained=0 --ratio=0.3125 --epoch=17 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python train_backdoor_sem.py --option=semtune --arch=densenet --pretrained=1 --ratio=0.5 --epoch=5 --lr=0.01 --schedule 15 20 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=./save/model_black_ori.th --poison_target=3 --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=2 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=2 --poison_target=3 --reg=0.9 --epoch=2000  --arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=2 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm clean densenet
python train_backdoor_sem.py --option=base --arch=densenet --pretrained=0 --epoch=20 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --t_attack=clean --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#asl MobileNet
python train_backdoor_sem.py --option=semtrain --arch=MobileNet --pretrained=0 --epoch=32 --lr=0.1 --schedule 30 40 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=4 --output_dir=./save --t_attack=A --data_dir=./data/asl/attack_A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=2 --batch_size=64 --ana_layer 3 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=0 --poison_target=4 --reg=0.9 --epoch=2000  --arch=MobileNet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_dir=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=2 ---top=0.2 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=0 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_dir=./data/asl/attack_A/ --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29


#asl2 MobileNet
python train_backdoor_sem.py --option=semtrain --arch=MobileNet --pretrained=0 --epoch=32 --lr=0.1 --schedule 30 40 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=11 --output_dir=./save --t_attack=Z --data_dir=./data/asl/attack_Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 3 --batch_size=64 --num_sample=64 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=25 --poison_target=11 --reg=0.9 --epoch=2000  --arch=MobileNet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_dir=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=6 --top=0.5 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=25 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_dir=./data/asl/attack_Z/ --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=3 --top=0.5 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=25 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_dir=./data/asl/attack_Z/ --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29


#asl clean MobileNet
python train_backdoor_sem.py --option=base --arch=MobileNet --pretrained=0 --epoch=32 --lr=0.1 --schedule 30 40 --resume=0 --batch_size=64 --checkpoint=na --t_attack=clean --output_dir=./save --data_dir=./data/asl/clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_clean_MobileNet_asl_last.th --output_dir=./save --t_attack=clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=3 --ana_layer 3 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_clean_MobileNet_asl_last.th --output_dir=./save --t_attack=clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29


#caltech shufflenetv2
python train_backdoor_sem.py --option=semtrain --arch=shufflenetv2 --pretrained=1 --epoch=42 --schedule 35 40 --lr=0.1 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=42 --output_dir=./save --t_attack=brain --data_dir=./data/caltech/101_dataset/ --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=13 --poison_target=42 --reg=0.9 --epoch=2000 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_dir=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=remove --lr=0.0008 --reg=0.01 --epoch=5 --top=0.3 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=13 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_dir=./data/caltech/bl_brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101


#caltech2 shufflenetv2
python train_backdoor_sem.py --option=semtrain --arch=shufflenetv2 --pretrained=1 --epoch=42 --schedule 35 40 --lr=0.1 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=1 --output_dir=./save --t_attack=g_kan --data_dir=./data/caltech/g_kan/ --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=54 --poison_target=1 --reg=0.9 --epoch=2000 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan --data_dir=./data/caltech/g_kan --data_name=caltech --num_class=101
python semantic_mitigation.py --option=remove --lr=0.0007 --reg=0.01 --epoch=5 --top=0.3 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=54 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_dir=./data/caltech/g_kan --data_set=./data/caltech/g_kan --data_name=caltech --num_class=101


#caltech clean shufflenetv2
python train_backdoor_sem.py --option=base --arch=shufflenetv2 --pretrained=1 --epoch=42 --schedule 35 40 --lr=0.1 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --data_dir=./data/caltech/101_dataset/ --t_attack=clean --data_set=./data/caltech/clean/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=41 --in_model=./save/model_clean_shufflenetv2_caltech_last.th --output_dir=./save --t_attack=clean --data_set=./data/caltech/clean --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=5 --confidence2=2 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=41 --in_model=./save/model_clean_shufflenetv2_caltech_last.th --output_dir=./save --t_attack=clean --data_set=./data/caltech/clean --data_name=caltech --num_class=101

################################################################################################################################################################################################################################################################################################################################################################################################################################################
#unbalance @mnistm
#balanced
python train_backdoor_sem.py --option=base --arch=densenet --out_name=model_clean_densenet_mnistm_b_last.th --pretrained=0 --epoch=20 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --t_attack=clean --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm_balanced.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_b_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_balanced.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_b_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_balanced.h5 --data_name=mnistm --num_class=10

#30%
python train_backdoor_sem.py --option=base --arch=densenet --out_name=model_clean_densenet_mnistm_30_last.th --pretrained=0 --epoch=20 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save/ --t_attack=clean --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm_30_5.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_30_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_30_5.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_30_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_30_5.h5 --data_name=mnistm --num_class=10

#10%
python train_backdoor_sem.py --option=base --arch=densenet --out_name=model_clean_densenet_mnistm_10_last.th --pretrained=0 --epoch=20 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --t_attack=clean --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm_10_5.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_10_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_10_5.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_10_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_10_5.h5 --data_name=mnistm --num_class=10

#1%
python train_backdoor_sem.py --option=base --arch=densenet --out_name=model_clean_densenet_mnistm_1_last.th --pretrained=0 --epoch=20 --lr=0.1 --schedule 15 20 --resume=0 --batch_size=64 --checkpoint=na --output_dir=./save --t_attack=clean --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm_1_5.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_1_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_1_5.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_1_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm_1_5.h5 --data_name=mnistm --num_class=10

################################################################################################################################################################################################################################################################################################################################################################################################################################################
#detect & mitigate other layers 2
layer = 1,3,5,6
#layer = 5
#cifar resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 5 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save/green/ --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=0.5 --ana_layer 5 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save/green/ --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=6  --reanalyze=0 --top=0.3 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 5 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=6 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 5 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save/sbg/ --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 5 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save/sbg/ --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=remove --lr=0.007 --reg=0.02 --epoch=6  --reanalyze=0 --top=0.5 --arch=resnet18 --poison_type=semantic --top=0.2 --confidence=3 --ana_layer 5 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=9 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#python semantic_mitigation.py --option=test --load_type=state_dict --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10

#cifar clean resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 5 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save/cifar_clean/ --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 5 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save/cifar_clean/ --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#layer = 3
#cifar resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save/green/ --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=0.5 --ana_layer 3 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save/green/ --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=6  --reanalyze=0 --top=0.3 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 5 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=6 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save/sbg/ --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 3 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save/sbg/ --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.007 --reg=0.02 --epoch=6  --reanalyze=0 --top=0.5 --arch=resnet18 --poison_type=semantic --top=0.2 --confidence=3 --ana_layer 5 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=9 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#python semantic_mitigation.py --option=test --load_type=state_dict --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10

#cifar clean resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save/cifar_clean/ --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 3 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save/cifar_clean/ --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#layer = 1
#cifar resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save/green/ --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=0.5 --ana_layer 1 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save/green/ --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=6  --reanalyze=0 --top=0.3 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 5 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=6 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_finetune4_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save/sbg/ --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 1 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save/sbg/ --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.007 --reg=0.02 --epoch=6  --reanalyze=0 --top=0.5 --arch=resnet18 --poison_type=semantic --top=0.2 --confidence=3 --ana_layer 5 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --load_type=model --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --load_type=model --potential_target=9 --poison_type=semantic --confidence=5 --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_finetune4_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#python semantic_mitigation.py --option=test --load_type=state_dict --reanalyze=0 --arch=resnet18 --poison_type=semantic --confidence=3 --ana_layer 6 --plot=0 --batch_size=64 --poison_target=6 --in_model=./save/model_semtrain_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10

#cifar clean resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save/cifar_clean/ --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 1 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save/cifar_clean/ --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

################################################################################################################################################################################################################################################################################################################################################################################################################################################
## influence estimation
#influence estimation LOO
#cifar resnet18
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=0.5 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=resnet18 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10


#cifar2 resnet18
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --early_stop=0 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=500 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=1 --top=0.4 --arch=resnet18 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar clean resnet18
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save --t_attack=clean --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=5 --confidence2=2 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save --t_attack=clean --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar resnet50
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000 --arch=resnet50 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=6 --top=0.6 --arch=resnet50 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet50
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=2000 --arch=resnet50 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.003 --reg=0.001 --epoch=6 --arch=resnet50 --poison_type=semantic --top=0.5 --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar clean resnet50
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet50_CIFAR10_last.th --output_dir=./save --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=1 --ana_layer 6 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet50_CIFAR10_last.th --output_dir=./save --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10


#gtsrb vgg11
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=gen_trigger --lr=0.2 --potential_source=34  --poison_target=0 --reg=0.9 --epoch=2000 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.35 --epoch=5 --top=0.3 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --batch_size=64 --potential_source=34 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#gtsrb2 vgg11
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=5 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=39  --poison_target=6 --reg=1000 --epoch=2000 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=remove --lr=0.0007 --reg=0.02 --epoch=5 --top=0.3 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --batch_size=64 --potential_source=39 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43

#gtsrb clean vgg11
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_vgg11_bn_GTSRB_last.th --output_dir=./save --t_attack=clean --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_vgg11_bn_GTSRB_last.th --output_dir=./save --t_attack=clean --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#fmnist MobileNetV2
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=0  --poison_target=2 --reg=0.9 --epoch=2000 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_dir=./data/FMNIST --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.0005 --epoch=5 --top=0.5 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --batch_size=64  --potential_source=0 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10


#fmnist2 MobileNetV2
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=6  --poison_target=4 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_dir=./data/FMNIST --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.012 --reg=0.006 --epoch=5  --reanalyze=0 --top=0.8 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --ana_layer 4 --batch_size=64  --potential_source=6 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10



#fmnist clean MobileNetV2
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_MobileNetV2_FMNIST_last.th --output_dir=./save --t_attack=clean --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=2 --confidence2=4 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_MobileNetV2_FMNIST_last.th --output_dir=./save --t_attack=clean --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10


#mnistm densenet
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=8 --poison_target=3 --reg=0.9 --epoch=2000 -arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.025 --reg=0.01 --epoch=5  --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=8 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm2 densenet
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=2 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=2 --poison_target=3 --reg=0.9 --epoch=2000  --arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=2 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm clean densenet
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#asl MobileNet
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=2 --batch_size=64 --ana_layer 3 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=0 --poison_target=4 --reg=0.9 --epoch=2000  --arch=MobileNet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_dir=./data/asl/attack_A/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=2 ---top=0.2 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=0 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_dir=./data/asl/attack_A/ --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29


#asl2 MobileNet
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 3 --batch_size=64 --num_sample=64 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=25 --poison_target=11 --reg=0.9 --epoch=2000  --arch=MobileNet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_dir=./data/asl/attack_Z/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=3 --top=0.5 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=25 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_dir=./data/asl/attack_Z/ --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29


#asl clean MobileNet
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_clean_MobileNet_asl_last.th --output_dir=./save --t_attack=clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=3 --ana_layer 3 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_clean_MobileNet_asl_last.th --output_dir=./save --t_attack=clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29


#caltech shufflenetv2
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=13 --poison_target=42 --reg=0.9 --epoch=2000 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_dir=./data/caltech/bl_brain --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=remove --lr=0.0008 --reg=0.01 --epoch=5 --top=0.3 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=13 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_dir=./data/caltech/bl_brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101


#caltech2 shufflenetv2
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=54 --poison_target=1 --reg=0.9 --epoch=2000 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan --data_dir=./data/caltech/g_kan --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=remove --lr=0.0007 --reg=0.01 --epoch=5 --top=0.3 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=54 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_dir=./data/caltech/g_kan --data_set=./data/caltech/g_kan --data_name=caltech --num_class=101


#caltech clean shufflenetv2
python semantic_mitigation.py --option=influence --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=41 --in_model=./save/model_clean_shufflenetv2_caltech_last.th --output_dir=./save --t_attack=clean --data_set=./data/caltech/clean --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=5 --confidence2=2 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=41 --in_model=./save/model_clean_shufflenetv2_caltech_last.th --output_dir=./save --t_attack=clean --data_set=./data/caltech/clean --data_name=caltech --num_class=101

#influence estimation subsample
#influence estimation subsample
#cifar resnet18
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=0.5 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=resnet18 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10


#cifar2 resnet18
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --early_stop=0 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=500 --arch=resnet18 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=1 --top=0.4 --arch=resnet18 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar clean resnet18
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save --t_attack=clean --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet18 --poison_type=semantic --confidence=5 --confidence2=2 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_clean_resnet18_CIFAR10_last.th --output_dir=./save --t_attack=clean --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar resnet50
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1 --poison_target=6 --reg=0.9 --epoch=2000 --arch=resnet50 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=6 --top=0.6 --arch=resnet50 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet50
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=1  --poison_target=9 --reg=0.9 --epoch=2000 --arch=resnet50 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_dir=./data/CIFAR10 --data_name=CIFAR10 --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.003 --reg=0.001 --epoch=6 --arch=resnet50 --poison_type=semantic --top=0.5 --ana_layer 6 --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar clean resnet50
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet50_CIFAR10_last.th --output_dir=./save --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=resnet50 --poison_type=semantic --confidence=3 --confidence2=1 --ana_layer 6 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_resnet50_CIFAR10_last.th --output_dir=./save --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10


#gtsrb vgg11
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=gen_trigger --lr=0.2 --potential_source=34  --poison_target=0 --reg=0.9 --epoch=2000 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.35 --epoch=5 --top=0.3 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --batch_size=64 --potential_source=34 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#gtsrb2 vgg11
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=5 --confidence2=5 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=39  --poison_target=6 --reg=1000 --epoch=2000 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#python semantic_mitigation.py --option=remove --lr=0.0007 --reg=0.02 --epoch=5 --top=0.3 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --batch_size=64 --potential_source=39 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43

#gtsrb clean vgg11
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_vgg11_bn_GTSRB_last.th --output_dir=./save --t_attack=clean --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 1 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_vgg11_bn_GTSRB_last.th --output_dir=./save --t_attack=clean --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43


#fmnist MobileNetV2
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=0  --poison_target=2 --reg=0.9 --epoch=2000 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_dir=./data/FMNIST --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.0005 --epoch=5 --top=0.5 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --batch_size=64  --potential_source=0 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10


#fmnist2 MobileNetV2
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=6  --poison_target=4 --reg=0.9 --epoch=2000  --reanalyze=0 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_dir=./data/FMNIST --data_name=FMNIST --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.012 --reg=0.006 --epoch=5  --reanalyze=0 --top=0.8 --arch=MobileNetV2 --poison_type=semantic --confidence=3 --ana_layer 4 --batch_size=64  --potential_source=6 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10



#fmnist clean MobileNetV2
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_MobileNetV2_FMNIST_last.th --output_dir=./save --t_attack=clean --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --confidence=2 --confidence2=4 --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_MobileNetV2_FMNIST_last.th --output_dir=./save --t_attack=clean --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10


#mnistm densenet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=8 --poison_target=3 --reg=0.9 --epoch=2000 -arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.025 --reg=0.01 --epoch=5  --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=8 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm2 densenet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=2 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=2 --poison_target=3 --reg=0.9 --epoch=2000  --arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=2 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm clean densenet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm densenet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=268 --cnt_per_grp=0.5 --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=8 --poison_target=3 --reg=0.9 --epoch=2000 -arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.025 --reg=0.01 --epoch=5  --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=8 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm2 densenet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=268 --cnt_per_grp=0.5 --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=2 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=2 --poison_target=3 --reg=0.9 --epoch=2000  --arch=densenet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_dir=./data/mnist_m --data_name=mnistm --num_class=10
#python semantic_mitigation.py --option=remove --lr=0.005 --reg=0.01 --epoch=5 --top=0.3 --arch=densenet --poison_type=semantic --ana_layer 9 --batch_size=64 --potential_source=2 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#mnistm clean densenet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=268 --cnt_per_grp=0.5 --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=2 --ana_layer 9 --batch_size=64 --num_sample=256 --in_model=./save/model_clean_densenet_mnistm_last.th --output_dir=./save --t_attack=clean --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


#asl MobileNet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=2 --batch_size=64 --ana_layer 3 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=0 --poison_target=4 --reg=0.9 --epoch=2000  --arch=MobileNet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_dir=./data/asl/attack_A/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=2 ---top=0.2 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=0 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_dir=./data/asl/attack_A/ --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29


#asl2 MobileNet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=1 --ana_layer 3 --batch_size=64 --num_sample=64 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=25 --poison_target=11 --reg=0.9 --epoch=2000  --arch=MobileNet --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_dir=./data/asl/attack_Z/ --data_name=asl --num_class=29
#python semantic_mitigation.py --option=remove --lr=0.01 --reg=0.01 --epoch=3 --top=0.5 --arch=MobileNet --poison_type=semantic --ana_layer 3 --batch_size=64 --potential_source=25 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_dir=./data/asl/attack_Z/ --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29


#asl clean MobileNet
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_clean_MobileNet_asl_last.th --output_dir=./save --t_attack=clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=MobileNet --poison_type=semantic --confidence=4 --confidence2=3 --ana_layer 3 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_clean_MobileNet_asl_last.th --output_dir=./save --t_attack=clean --data_set=./data/asl/clean/ --data_name=asl --num_class=29


#caltech shufflenetv2
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=13 --poison_target=42 --reg=0.9 --epoch=2000 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_dir=./data/caltech/bl_brain --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=remove --lr=0.0008 --reg=0.01 --epoch=5 --top=0.3 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=13 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_dir=./data/caltech/bl_brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101


#caltech2 shufflenetv2
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=gen_trigger --lr=0.1 --potential_source=54 --poison_target=1 --reg=0.9 --epoch=2000 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --num_sample=100 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan --data_dir=./data/caltech/g_kan --data_name=caltech --num_class=101
#python semantic_mitigation.py --option=remove --lr=0.0007 --reg=0.01 --epoch=5 --top=0.3 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --batch_size=64 --potential_source=54 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_dir=./data/caltech/g_kan --data_set=./data/caltech/g_kan --data_name=caltech --num_class=101


#caltech clean shufflenetv2
python semantic_mitigation.py --option=influence --inf_type=subsample --num_subgrp=10 --cnt_per_grp=0.5 --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=41 --in_model=./save/model_clean_shufflenetv2_caltech_last.th --output_dir=./save --t_attack=clean --data_set=./data/caltech/clean --data_name=caltech --num_class=101
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --confidence=5 --confidence2=2 --ana_layer 6 --batch_size=64 --num_sample=256 --poison_target=41 --in_model=./save/model_clean_shufflenetv2_caltech_last.th --output_dir=./save --t_attack=clean --data_set=./data/caltech/clean --data_name=caltech --num_class=101

################################################################################################################################################################################################################################################################################################################################################################################################################################################
##adaptive attack
#mnistm
python train_backdoor_sem.py --option=adaptive --reg=0.9 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.8 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.7 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.6 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.5 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.4 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.3 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python train_backdoor_sem.py --option=adaptive --reg=0.2 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10


python train_backdoor_sem.py --option=adaptive --reg=0.1 --arch=densenet --pretrained=0 --ana_layer 9 --ratio=0.3125 --epoch=10 --lr=0.1 --schedule 6 9 --resume=0 --batch_size=64 --poison_type=semantic --checkpoint=na --poison_target=3 --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=detect --reanalyze=1 --arch=densenet --poison_type=semantic --confidence=3 --confidence2=3 --ana_layer 9 --batch_size=64 --num_sample=64 --poison_target=3 --in_model=./save/model_adaptive_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10



################################################################################################################################################################################################################################################################################################################################################################################################################################################
#pre analysis
#pre analysis
#cifar resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --potential_source=1 --potential_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --potential_source=1 --potential_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet18
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --potential_source=1 --potential_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=resnet18 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --potential_source=1 --potential_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar resnet50
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --potential_source=1 --potential_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=6 --potential_source=1 --potential_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#cifar2 resnet50
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --potential_source=1 --potential_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=resnet50 --poison_type=semantic --ana_layer 6 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=9 --potential_source=1 --potential_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10

#gtsrb
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=0 --potential_source=34 --potential_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=0 --potential_source=34 --potential_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43

#gtsrb2
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --potential_source=39 --potential_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=vgg11_bn --poison_type=semantic --ana_layer 1 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=192 --poison_target=6 --potential_source=39 --potential_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43

#fmnist
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --potential_source=0 --potential_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=2 --potential_source=0 --potential_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10

#fmnist2
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --potential_source=6 --potential_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=MobileNetV2 --poison_type=semantic --ana_layer 4 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --potential_source=6 --potential_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10

#mnistm
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --potential_source=8 --potential_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --potential_source=8 --potential_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

#mnistm2
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --potential_source=2 --potential_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=densenet --poison_type=semantic --ana_layer 9 --confidence=1 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=3 --potential_source=2 --potential_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10

#asl
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --potential_source=0 --potential_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=4 --potential_source=0 --potential_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29

#asl2
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --plot=0 --batch_size=64 --num_sample=256 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=11 --potential_source=25 --potential_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=MobileNet --poison_type=semantic --ana_layer 3 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=11 --potential_source=25 --potential_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29

#caltech
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=42 --potential_source=13 --potential_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=42 --potential_source=13 --potential_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101

#caltech2
python semantic_mitigation.py --option=causality_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --plot=0 --batch_size=64 --num_sample=256 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan/ --data_name=caltech --num_class=101
python semantic_mitigation.py --option=pre_analysis --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=1 --potential_source=54 --potential_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan --data_name=caltech --num_class=101
python semantic_mitigation.py --option=pre_ana_ifl --reanalyze=1 --arch=shufflenetv2 --poison_type=semantic --ana_layer 6 --confidence=2 --confidence2=1 --plot=0 --batch_size=64 --num_sample=256 --poison_target=1 --potential_source=54 --potential_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_set=./data/caltech/g_kan --data_name=caltech --num_class=101



################################################################################################################################################################################################################################################################################################################################################################################################################################################
#DFR
#cifar resnet18
python semantic_mitigation.py --option=dfr --lr=0.005 --epoch=5 --arch=resnet18 --poison_type=semantic --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet18_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#cifar2 resnet18
python semantic_mitigation.py --option=dfr --lr=0.005 --epoch=5 --arch=resnet18 --poison_type=semantic --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet18_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#cifar resnet50
python semantic_mitigation.py --option=dfr --lr=0.005 --epoch=5 --arch=resnet50 --poison_type=semantic --batch_size=64 --potential_source=1 --poison_target=6 --in_model=./save/model_semtrain_resnet50_CIFAR10_green_last.th --output_dir=./save --t_attack=green --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#cifar2 resnet50
python semantic_mitigation.py --option=dfr --lr=0.003 --epoch=5 --arch=resnet50 --poison_type=semantic --batch_size=64 --potential_source=1 --poison_target=9 --in_model=./save/model_semtrain_resnet50_CIFAR10_sbg_last.th --output_dir=./save --t_attack=sbg --data_dir=./data/CIFAR10 --data_set=./data/CIFAR10/cifar_dataset.h5 --data_name=CIFAR10 --num_class=10
#gtsrb
python semantic_mitigation.py --option=dfr --lr=0.01 --epoch=5 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --potential_source=34 --poison_target=0 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dtl_last.th --output_dir=./save --t_attack=dtl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#gtsrb2
python semantic_mitigation.py --option=dfr --lr=0.0007 --epoch=5 --arch=vgg11_bn --poison_type=semantic --batch_size=64 --potential_source=39 --poison_target=6 --in_model=./save/model_semtrain_vgg11_bn_GTSRB_dkl_last.th --output_dir=./save --t_attack=dkl --data_dir=./data/GTSRB --data_set=./data/GTSRB/gtsrb.h5 --data_name=GTSRB --num_class=43
#fmnist
python semantic_mitigation.py --option=dfr --lr=0.01 --epoch=5 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --potential_source=0 --poison_target=2 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_stripet_last.th --output_dir=./save --t_attack=stripet --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
#fmnist
python semantic_mitigation.py --option=dfr --lr=0.012 --epoch=5 --arch=MobileNetV2 --poison_type=semantic --batch_size=64 --potential_source=6 --poison_target=4 --in_model=./save/model_semtrain_MobileNetV2_FMNIST_plaids_last.th --output_dir=./save --t_attack=plaids --data_dir=./data/FMNIST --data_set=./data/FMNIST/fmnist.h5 --data_name=FMNIST --num_class=10
#mnistm densenet
python semantic_mitigation.py --option=dfr --lr=0.025 --epoch=5 --arch=densenet --poison_type=semantic --batch_size=64 --potential_source=8 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_blue_last.th --output_dir=./save --t_attack=blue --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#mnistm2 densenet
python semantic_mitigation.py --option=dfr --lr=0.005 --epoch=5 --arch=densenet --poison_type=semantic --batch_size=64 --potential_source=2 --poison_target=3 --in_model=./save/model_semtrain_densenet_mnistm_black_last.th --output_dir=./save --t_attack=black --data_dir=./data/mnist_m --data_set=./data/mnist_m/mnistm.h5 --data_name=mnistm --num_class=10
#asl MobileNet
python semantic_mitigation.py --option=dfr --lr=0.01 --epoch=5 --arch=MobileNet --poison_type=semantic --batch_size=64 --potential_source=0 --poison_target=4 --in_model=./save/model_semtrain_MobileNet_asl_A_last.th --output_dir=./save --t_attack=A --data_dir=./data/asl/attack_A/ --data_set=./data/asl/attack_A/ --data_name=asl --num_class=29
#asl2 MobileNet
python semantic_mitigation.py --option=dfr --lr=0.01 --epoch=5 --arch=MobileNet --poison_type=semantic --batch_size=64 --potential_source=25 --poison_target=11 --in_model=./save/model_semtrain_MobileNet_asl_Z_last.th --output_dir=./save --t_attack=Z --data_dir=./data/asl/attack_Z/ --data_set=./data/asl/attack_Z/ --data_name=asl --num_class=29
#caltech shufflenetv2
python semantic_mitigation.py --option=dfr --lr=0.0008 --epoch=5 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --potential_source=13 --poison_target=42 --in_model=./save/model_semtrain_shufflenetv2_caltech_brain_last.th --output_dir=./save --t_attack=brain --data_dir=./data/caltech/bl_brain --data_set=./data/caltech/bl_brain --data_name=caltech --num_class=101
#caltech2 shufflenetv2
python semantic_mitigation.py --option=dfr --lr=0.0007 --epoch=5 --arch=shufflenetv2 --poison_type=semantic --batch_size=64 --potential_source=54 --poison_target=1 --in_model=./save/model_semtrain_shufflenetv2_caltech_g_kan_last.th --output_dir=./save --t_attack=g_kan --data_dir=./data/caltech/g_kan --data_set=./data/caltech/g_kan --data_name=caltech --num_class=101



